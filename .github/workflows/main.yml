name: Auto Commit

on:
  schedule:
    - cron: "0 */2 * * *"

jobs:
  auto-commit:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout Repository
      uses: actions/checkout@v2

    - name: Set Git Config
      run: |
        git config user.email "nikhiljp.skj@gmail.com"
        git config user.name "nikhilljpskj"

    - name: Run Your Script
      run: |
        echo "Auto-generated file: $(date)" > autogenerated.txt

        # Check if there are changes
        if [ -n "$(git status --porcelain)" ]; then
          git add .
          git commit -m "Auto commit: $(date)"
          
          # Configure git with the GitHub token for authentication
          git config --local user.email "action@github.com"
          git config --local user.name "GitHub Action"
          
          # Push changes using the GitHub token
          git push https://github.com/nikhilljpskj/PSP.git HEAD:master
        else
          echo "No changes to commit."
        fi
